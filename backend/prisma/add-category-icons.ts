import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

// –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∏–∫–æ–Ω–∫–∞–º–∏
const CATEGORY_ICONS: Record<string, string> = {
  // –†–∞—Å—Ö–æ–¥—ã
  '–°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç—ã': 'üõí',
  '–†–µ—Å—Ç–æ—Ä–∞–Ω—ã –∏ –∫–∞—Ñ–µ': 'üçΩÔ∏è',
  '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç': 'üöå',
  '–ê–≤—Ç–æ–º–æ–±–∏–ª—å': 'üöó',
  '–°–≤—è–∑—å –∏ —Ç–µ–ª–µ–∫–æ–º': 'üì±',
  '–ó–¥–æ—Ä–æ–≤—å–µ –∏ –∫—Ä–∞—Å–æ—Ç–∞': 'üíä',
  '–û–¥–µ–∂–¥–∞ –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã': 'üëï',
  '–û—Ç–¥—ã—Ö –∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è': 'üéÆ',
  '–í—Å–µ –¥–ª—è –¥–æ–º–∞': 'üè†',
  '–ñ–ö–•': 'üí°',
  '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ': 'üìö',
  '–í—ã–¥–∞—á–∞ –Ω–∞–ª–∏—á–Ω—ã—Ö': 'üíµ',
  '–ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã': 'üì¶',
  '–ü—Ä–æ—á–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏': 'üì¶',
  // –î–æ—Ö–æ–¥—ã
  '–ü–µ—Ä–µ–≤–æ–¥ –°–ë–ü': 'üí∏',
  '–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É': 'üí≥',
  '–ü–µ—Ä–µ–≤–æ–¥ —Å –∫–∞—Ä—Ç—ã': 'üí≥',
  '–î—Ä—É–≥–æ–µ': 'üì•',
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑ –°–±–µ—Ä–∞
  '–û–ø–ª–∞—Ç–∞ –ø–æ QR-–∫–æ–¥—É –°–ë–ü': 'üì≤',
  '–û–ø–ª–∞—Ç–∞ –ø–æ QR‚Äì–∫–æ–¥—É –°–ë–ü': 'üì≤',
};

async function main() {
  console.log('=== –î–æ–±–∞–≤–ª—è—é –∏–∫–æ–Ω–∫–∏ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º ===\n');

  const categories = await prisma.category.findMany();
  console.log(`–ù–∞–π–¥–µ–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: ${categories.length}`);

  let updated = 0;

  for (const cat of categories) {
    const icon = CATEGORY_ICONS[cat.name];
    if (icon && cat.icon !== icon) {
      await prisma.category.update({
        where: { id: cat.id },
        data: { icon },
      });
      console.log(`  ${icon} ${cat.name}`);
      updated++;
    }
  }

  console.log(`\n=== –ì–æ—Ç–æ–≤–æ ===`);
  console.log(`–û–±–Ω–æ–≤–ª–µ–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: ${updated}`);
}

main()
  .catch((e) => {
    console.error('–û—à–∏–±–∫–∞:', e);
    process.exit(1);
  })
  .finally(() => prisma.$disconnect());
